"use strict";for(var json='{   "events": [     {"title":"Напиться!","date":"2018-11-30T12:00:00.000Z", "members":"Витя Костин, Петр Михайлов."},     {"title":"ДР!","date":"2018-11-22T12:00:00.000Z", "members":"Витя Молодцов"},     {"title":"Юбилей-100лет!!","date":"2018-12-18T12:00:00.000Z", "members":"Алевтина Павловна"}   ]}',events=JSON.parse(json,function(e,t){return"date"==e?new Date(t):t}),eventsDates=[],i=0;i<events.events.length;i++)eventsDates.push(events.events[i].date);console.log(eventsDates);var myDate=new Date,myWeekDay=myDate.getDay(),myDay=myDate.getDate(),myMonth=myDate.getMonth(),myYear=myDate.getFullYear(),anotherMonthCells="another__cells",actualMonthCells="actual__cells",plate=document.querySelector(".calendar_plate"),actualMonthAndYear=document.querySelector(".current"),previousMonth=document.querySelector(".js-previousMonth"),nextMonth=document.querySelector(".js-nextMonth"),actualMonth=document.querySelector(".js-actualMonth"),cells=plate.childNodes;function mondayFirst(e){return 0==e?e=6:e-=1}function getLastDay(e,t){return new Date(e,t+1,0)}function createACell(e,t,a,n){var l=document.createElement("div");l.classList.add(e),l.classList.add("cell");var r=t,s=a,o=n+1;return 12<o&&(s+=o=1),l.setAttribute("data-day",r),l.setAttribute("data-month",o),l.setAttribute("data-year",s),console.log("бля"),l.appendChild(document.createTextNode(t)),l}function genPreviosMonth(e,t){var a=new Date(e,t).getDay();a=mondayFirst(a);for(var n=getLastDay(e,t-1).getDate(),l=document.createDocumentFragment(),r=0,s=n-a+1;r<a;r++)0==t&&(t=12),l.appendChild(createACell(anotherMonthCells,s,e,t-1)),s++;plate.appendChild(l)}function genActualMonth(e,t){for(var a=getLastDay(e,t).getDate(),n=document.createDocumentFragment(),l=1;l<=a;l++)n.appendChild(createACell(actualMonthCells,l,e,t));plate.appendChild(n)}function genNextMonth(e,t){var a=getLastDay(e,t).getDay();if(6!=(a=mondayFirst(a))){for(var n=document.createDocumentFragment(),l=a,r=1;l<6;l++)n.appendChild(createACell(anotherMonthCells,r,e,t+1)),r++;plate.appendChild(n)}}function setMonthAndYear(e,t){var a=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"][e];actualMonthAndYear.innerHTML=a+", "+t}function generateCalendar(e,t){genPreviosMonth(e,t),genActualMonth(e,t),genNextMonth(e,t),setMonthAndYear(t,e),currentDay()}function currentDay(){for(var e=myDate.getMonth(),t=myDate.getFullYear(),a=0;a<cells.length;a++){cells[a].dataset.day==myDay&&cells[a].dataset.month==e+1&&cells[a].dataset.year==t&&cells[a].classList.add("today");for(var n=0;n<eventsDates.length;n++)if(cells[a].dataset.day==eventsDates[n].getDate()&&cells[a].dataset.month==eventsDates[n].getMonth()+1&&cells[a].dataset.year==eventsDates[n].getFullYear()){var l=document.createElement("p");l.classList.add("event__title"),l.innerHTML=events.events[n].title,cells[a].appendChild(l);var r=document.createElement("p");r.classList.add("event__members"),r.innerHTML=events.events[n].members,cells[a].appendChild(r),cells[a].classList.add("full")}}}generateCalendar(myYear,myMonth),previousMonth.addEventListener("click",function(){(myMonth-=1)<0&&(myMonth=11,myYear-=1),plate.innerHTML="",generateCalendar(myYear,myMonth)}),nextMonth.addEventListener("click",function(){11<(myMonth+=1)&&(myMonth=0,myYear+=1),plate.innerHTML="",generateCalendar(myYear,myMonth)}),actualMonth.addEventListener("click",function(){myMonth=myDate.getMonth(),myYear=myDate.getFullYear(),plate.innerHTML="",generateCalendar(myYear,myMonth)});